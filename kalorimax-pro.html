<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🌟 KaloriMax Pro 2.0 - Ultimate Beslenme Takibi</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --secondary-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --success-gradient: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            --warning-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --dark-bg: #1a1a2e;
            --dark-card: #16213e;
            --dark-text: #e94560;
            --light-bg: #f8f9fa;
            --light-card: rgba(255, 255, 255, 0.95);
            --light-text: #333;
            --light-text-secondary: rgba(0, 0, 0, 0.6);
            --input-bg: rgba(255, 255, 255, 0.9);
            --input-text: #333;
            --input-placeholder: rgba(0, 0, 0, 0.6);
            --border-color: rgba(0, 0, 0, 0.1);
            --hover-bg: rgba(0, 0, 0, 0.05);
            --header-text: #333;
            --stat-text: #333;
            --label-text: #333;
        }

        [data-theme="dark"] {
            --bg-color: var(--dark-bg);
            --card-color: var(--dark-card);
            --text-color: var(--dark-text);
        }

        [data-theme="light"] {
            --bg-color: var(--light-bg);
            --card-color: var(--light-card);
            --text-color: var(--light-text);
            --text-secondary: var(--light-text-secondary);
            --input-bg: rgba(255, 255, 255, 0.9);
            --input-text: #333;
            --input-placeholder: rgba(0, 0, 0, 0.6);
            --border-color: rgba(0, 0, 0, 0.1);
            --hover-bg: rgba(0, 0, 0, 0.05);
            --header-text: #333;
            --stat-text: #333;
            --label-text: #333;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--bg-color, var(--primary-gradient));
            color: var(--text-color, white);
            min-height: 100vh;
            transition: all 0.3s ease;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* HEADER */
        .header {
            text-align: center;
            margin-bottom: 30px;
            position: relative;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            color: var(--header-text, #333);
            text-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .header p {
            font-size: 1.1rem;
            color: var(--text-secondary, #666);
            margin-bottom: 20px;
        }

        /* THEME TOGGLE */
        .theme-toggle {
            position: absolute;
            top: 0;
            right: 0;
            background: rgba(255,255,255,0.2);
            border: none;
            padding: 10px 15px;
            border-radius: 25px;
            color: white;
            cursor: pointer;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .theme-toggle:hover {
            background: rgba(255,255,255,0.3);
            transform: scale(1.05);
        }

        /* USER PROFILE SECTION */
        .profile-section {
            background: var(--card-color, rgba(255,255,255,0.15));
            padding: 25px;
            border-radius: 20px;
            margin-bottom: 30px;
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255,255,255,0.2);
        }

        .profile-form {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            margin-bottom: 5px;
            font-weight: 600;
            color: var(--label-text, #333);
        }

        .form-group input, .form-group select {
            padding: 10px;
            border: none;
            border-radius: 10px;
            background: rgba(255,255,255,0.2);
            color: white;
            backdrop-filter: blur(10px);
        }

        .form-group input::placeholder {
            color: rgba(255,255,255,0.7);
        }

        .form-group select option {
            background: var(--input-bg);
            color: var(--input-text);
            padding: 10px;
        }

        /* TAB NAVIGATION */
        .tab-navigation {
            display: flex;
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 5px;
            margin-bottom: 30px;
            backdrop-filter: blur(15px);
        }

        .tab-btn {
            flex: 1;
            padding: 15px 20px;
            border: none;
            background: transparent;
            color: var(--text-color, white);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .tab-btn.active {
            background: var(--secondary-gradient);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            transform: translateY(-2px);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* DASHBOARD CARDS */
        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: var(--card-color, rgba(255,255,255,0.15));
            padding: 25px;
            border-radius: 20px;
            text-align: center;
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255,255,255,0.2);
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 10px;
            color: var(--stat-text, #333);
        }

        .stat-label {
            font-size: 1rem;
            color: var(--text-secondary, #666);
            margin-bottom: 10px;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255,255,255,0.2);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--success-gradient);
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        /* SEARCH AND ADD SECTION */
        .search-section {
            background: var(--card-color, rgba(255,255,255,0.15));
            padding: 25px;
            border-radius: 20px;
            margin-bottom: 30px;
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255,255,255,0.2);
        }

        .search-container {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .search-input {
            flex: 1;
            min-width: 300px;
            padding: 15px 20px;
            border: none;
            border-radius: 25px;
            background: rgba(255,255,255,0.2);
            color: white;
            font-size: 1rem;
            backdrop-filter: blur(10px);
        }

        .search-input::placeholder {
            color: rgba(255,255,255,0.7);
        }

        .category-filter {
            padding: 15px 20px;
            border: none;
            border-radius: 25px;
            background: rgba(255,255,255,0.2);
            color: white;
            cursor: pointer;
            backdrop-filter: blur(10px);
        }

        .category-filter option {
            background: var(--input-bg);
            color: var(--input-text);
            padding: 10px;
        }

        .btn {
            padding: 15px 25px;
            border: none;
            border-radius: 25px;
            background: var(--secondary-gradient);
            color: white;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        }

        .btn-primary { background: var(--primary-gradient); }
        .btn-success { background: var(--success-gradient); }
        .btn-warning { background: var(--warning-gradient); }

        /* FOOD RESULTS */
        .food-results {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .food-item {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 15px;
            border: 1px solid rgba(255,255,255,0.2);
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .food-item:hover {
            transform: translateY(-3px);
            background: rgba(255,255,255,0.2);
        }

        .food-name {
            font-weight: 600;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            color: var(--text-color, #333);
        }

        .favorite-btn {
            background: none;
            border: none;
            color: #ffd700;
            cursor: pointer;
            font-size: 1.2rem;
        }

        .nutrition-info {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
            margin-bottom: 15px;
            font-size: 0.9rem;
            color: var(--text-secondary, #666);
        }

        .amount-input {
            width: 80px;
            padding: 8px;
            border: none;
            border-radius: 8px;
            background: rgba(255,255,255,0.2);
            color: white;
            text-align: center;
        }

        /* FOOD HISTORY */
        .food-history {
            background: var(--card-color, rgba(255,255,255,0.15));
            padding: 25px;
            border-radius: 20px;
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255,255,255,0.2);
        }

        .history-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            margin-bottom: 10px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .history-details {
            flex: 1;
            color: var(--text-color, #333);
        }

        .history-nutrition {
            display: flex;
            gap: 15px;
            font-size: 0.9rem;
            color: var(--text-secondary, #666);
        }

        .delete-btn {
            background: none;
            border: none;
            color: #ff6b6b;
            cursor: pointer;
            font-size: 1.2rem;
            padding: 5px;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .delete-btn:hover {
            background: rgba(255,107,107,0.2);
        }

        /* WATER TRACKING */
        .water-tracker {
            background: var(--success-gradient);
            padding: 25px;
            border-radius: 20px;
            text-align: center;
            margin-bottom: 20px;
        }

        .water-tracker h3 {
            color: white;
            margin-bottom: 10px;
        }

        .water-tracker p {
            color: white;
            margin-bottom: 10px;
        }

        .water-cups {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .water-cup {
            width: 40px;
            height: 40px;
            border: 2px solid white;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .water-cup.filled {
            background: white;
            color: #4facfe;
        }

        .water-cup:hover {
            transform: scale(1.1);
        }

        /* RESPONSIVE */
        @media (max-width: 768px) {
            .container { padding: 10px; }
            .header h1 { font-size: 2rem; }
            .dashboard { grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); }
            .search-container { flex-direction: column; }
            .search-input { min-width: 100%; }
            .tab-navigation { flex-direction: column; }
            .profile-form { grid-template-columns: 1fr; }
        }

        /* ANIMATIONS */
        @keyframes slideInUp {
            from { transform: translateY(30px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .animate-in {
            animation: slideInUp 0.5s ease-out;
        }

        /* CHARTS */
        .chart-container {
            background: var(--card-color, rgba(255,255,255,0.15));
            padding: 25px;
            border-radius: 20px;
            margin-bottom: 30px;
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255,255,255,0.2);
        }

        .macro-chart {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 200px;
        }

        .macro-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            background: conic-gradient(
                #ff6b6b 0deg 90deg,
                #4ecdc4 90deg 180deg,
                #45b7d1 180deg 270deg,
                #96ceb4 270deg 360deg
            );
        }

        .macro-center {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: var(--card-color, rgba(255,255,255,0.9));
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            color: var(--text-color, #333);
        }

        .macro-center strong {
            color: var(--text-color, #333);
        }

        .macro-center small {
            color: var(--text-secondary, #666);
        }

        /* HEADINGS */
        h3 {
            color: var(--header-text, #333);
            margin-bottom: 15px;
        }
    </style>
</head>
<body data-theme="light">
    <div class="container">
        <!-- HEADER -->
        <header class="header">
            <button class="theme-toggle" onclick="toggleTheme()">🌙 / ☀️</button>
            <h1>🌟 KaloriMax Pro 2.0</h1>
            <p>Ultimate Beslenme Takibi - 3000+ Besin | Markalar | Profesyonel Takip</p>
        </header>

        <!-- USER PROFILE SECTION -->
        <div class="profile-section">
            <h3>👤 Kullanıcı Profili & Otomatik Hedef Hesaplama</h3>
            <div class="profile-form">
                <div class="form-group">
                    <label>Ad</label>
                    <input type="text" id="userName" placeholder="Adınız">
                </div>
                <div class="form-group">
                    <label>Yaş</label>
                    <input type="number" id="userAge" placeholder="25">
                </div>
                <div class="form-group">
                    <label>Cinsiyet</label>
                    <select id="userGender">
                        <option value="male">Erkek</option>
                        <option value="female">Kadın</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Boy (cm)</label>
                    <input type="number" id="userHeight" placeholder="175">
                </div>
                <div class="form-group">
                    <label>Kilo (kg)</label>
                    <input type="number" id="userWeight" placeholder="70">
                </div>
                <div class="form-group">
                    <label>Aktivite Seviyesi</label>
                    <select id="activityLevel">
                        <option value="1.2">Sedanter (masa başı)</option>
                        <option value="1.375">Hafif aktif (haftada 1-3 gün)</option>
                        <option value="1.55">Orta aktif (haftada 3-5 gün)</option>
                        <option value="1.725">Çok aktif (haftada 6-7 gün)</option>
                        <option value="1.9">Ekstrem aktif (günde 2 kez)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Hedef</label>
                    <select id="goal">
                        <option value="maintain">Kilo Koruma</option>
                        <option value="lose">Kilo Verme (-0.5kg/hafta)</option>
                        <option value="gain">Kilo Alma (+0.5kg/hafta)</option>
                    </select>
                </div>
            </div>
            <button class="btn btn-success" onclick="calculateTargets()">🎯 Hedefleri Hesapla</button>
        </div>

        <!-- WATER TRACKER -->
        <div class="water-tracker">
            <h3>💧 Su Takibi</h3>
            <p>Günlük hedef: 8 bardak (2L)</p>
            <div class="water-cups" id="waterCups">
                <!-- Su bardakları dinamik oluşturulacak -->
            </div>
            <p><span id="waterCount">0</span> / 8 bardak içildi</p>
        </div>

        <!-- TAB NAVIGATION -->
        <nav class="tab-navigation">
            <button class="tab-btn active" onclick="openTab('dashboard')">📊 Dashboard</button>
            <button class="tab-btn" onclick="openTab('search')">🔍 Besin Ekle</button>
            <button class="tab-btn" onclick="openTab('favorites')">⭐ Favoriler</button>
            <button class="tab-btn" onclick="openTab('period')">🌸 Adet Takibi</button>
            <button class="tab-btn" onclick="openTab('stats')">📈 İstatistikler</button>
            <button class="tab-btn" onclick="openTab('settings')">⚙️ Ayarlar</button>
        </nav>

        <!-- DASHBOARD TAB -->
        <div id="dashboard" class="tab-content active">
            <div class="dashboard">
                <div class="stat-card">
                    <div class="stat-number" id="totalCalories">0</div>
                    <div class="stat-label">Kalori</div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="calorieProgress"></div>
                    </div>
                    <div style="margin-top: 10px;">
                        <span id="calorieTarget" onclick="editCalorieTarget()" style="cursor: pointer; text-decoration: underline;">2000</span> hedef
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="totalProtein">0</div>
                    <div class="stat-label">Protein (g)</div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="proteinProgress"></div>
                    </div>
                    <div style="margin-top: 10px;"><span id="proteinTarget">150</span>g hedef</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="totalCarbs">0</div>
                    <div class="stat-label">Karbonhidrat (g)</div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="carbProgress"></div>
                    </div>
                    <div style="margin-top: 10px;"><span id="carbTarget">250</span>g hedef</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="totalFat">0</div>
                    <div class="stat-label">Yağ (g)</div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="fatProgress"></div>
                    </div>
                    <div style="margin-top: 10px;"><span id="fatTarget">65</span>g hedef</div>
                </div>
            </div>

            <!-- MACRO CHART -->
            <div class="chart-container">
                <h3>📊 Makro Dağılımı</h3>
                <div class="macro-chart">
                    <div class="macro-circle">
                        <div class="macro-center">
                            <strong id="totalCaloriesChart">0</strong>
                            <small>kalori</small>
                        </div>
                    </div>
                </div>
                <div style="display: flex; justify-content: space-around; margin-top: 20px;">
                    <div style="text-align: center;">
                        <div style="color: #ff6b6b;">●</div>
                        <small>Protein</small>
                    </div>
                    <div style="text-align: center;">
                        <div style="color: #4ecdc4;">●</div>
                        <small>Karbonhidrat</small>
                    </div>
                    <div style="text-align: center;">
                        <div style="color: #45b7d1;">●</div>
                        <small>Yağ</small>
                    </div>
                </div>
            </div>

            <!-- FOOD HISTORY -->
            <div class="food-history">
                <h3>🍽️ Bugünkü Yemekler</h3>
                <div id="foodList"></div>
            </div>
        </div>

        <!-- SEARCH TAB -->
        <div id="search" class="tab-content">
            <div class="search-section">
                <h3>🔍 Besin Arama & Ekleme</h3>
                <div class="search-container">
                    <input type="text" id="foodSearch" class="search-input" 
                           placeholder="🔍 Besin ara... (örn: tavuk göğsü, nutella, big mac, ülker)">
                    <select id="categoryFilter" class="category-filter">
                        <option value="">Tüm Kategoriler</option>
                        <option value="Et">🥩 Et Ürünleri</option>
                        <option value="Tavuk">🍗 Tavuk</option>
                        <option value="Balık">🐟 Balık</option>
                        <option value="Süt">🥛 Süt Ürünleri</option>
                        <option value="Meyve">🍎 Meyveler</option>
                        <option value="Sebze">🥬 Sebzeler</option>
                        <option value="Tahıl">🌾 Tahıllar</option>
                        <option value="Baklagil">🫘 Baklagiller</option>
                        <option value="Kuruyemiş">🥜 Kuruyemişler</option>
                        <option value="Egzotik">🌍 Egzotik</option>
                        <option value="Fast Food">🍔 Fast Food</option>
                        <option value="Tatlı">🍰 Tatlılar</option>
                        <option value="İçecek">🥤 İçecekler</option>
                        <option value="McDonald's">🍔 McDonald's</option>
                        <option value="KFC">🍗 KFC</option>
                        <option value="Nutella">🍫 Nutella</option>
                        <option value="Coca-Cola">🥤 Coca-Cola</option>
                    </select>
                    <button class="btn btn-primary" onclick="searchFood()">Ara</button>
                </div>
                
                <div class="food-results" id="searchResults"></div>
            </div>
        </div>

        <!-- FAVORITES TAB -->
        <div id="favorites" class="tab-content">
            <div class="search-section">
                <h3>⭐ Favori Besinler</h3>
                <div class="food-results" id="favoritesList"></div>
            </div>
        </div>

        <!-- PERIOD TRACKING TAB -->
        <div id="period" class="tab-content">
            <div class="search-section">
                <h3>🌸 Adet Takip Sistemi</h3>
                <p style="margin-bottom: 20px; color: var(--text-secondary);">Adet döngünüzü takip edin, semptomları kaydedin ve doğurganlık günlerinizi öğrenin</p>
                
                <!-- CYCLE INFO -->
                <div class="cycle-info" style="background: var(--card-color, rgba(255,255,255,0.15)); padding: 20px; border-radius: 15px; margin-bottom: 20px; backdrop-filter: blur(15px); border: 1px solid rgba(255,255,255,0.2);">
                    <h4 style="color: var(--header-text, #333); margin-bottom: 15px;">📅 Döngü Bilgileri</h4>
                    <div class="profile-form">
                        <div class="form-group">
                            <label>Son Adet Başlangıcı</label>
                            <input type="date" id="lastPeriodStart" onchange="updateCycleInfo()">
                        </div>
                        <div class="form-group">
                            <label>Ortalama Döngü Süresi (gün)</label>
                            <input type="number" id="cycleLength" value="28" min="21" max="35" onchange="updateCycleInfo()">
                        </div>
                        <div class="form-group">
                            <label>Ortalama Adet Süresi (gün)</label>
                            <input type="number" id="periodLength" value="5" min="3" max="7" onchange="updateCycleInfo()">
                        </div>
                    </div>
                </div>

                <!-- CYCLE STATUS -->
                <div class="cycle-status" style="background: var(--card-color, rgba(255,255,255,0.15)); padding: 20px; border-radius: 15px; margin-bottom: 20px; backdrop-filter: blur(15px); border: 1px solid rgba(255,255,255,0.2);">
                    <h4 style="color: var(--header-text, #333); margin-bottom: 15px;">📊 Döngü Durumu</h4>
                    <div id="cycleStatus" style="text-align: center; padding: 15px; border-radius: 10px; background: rgba(255,255,255,0.1);">
                        <!-- Cycle status will be populated by JavaScript -->
                    </div>
                </div>

                <!-- SYMPTOM TRACKER -->
                <div class="symptom-tracker" style="background: var(--card-color, rgba(255,255,255,0.15)); padding: 20px; border-radius: 15px; margin-bottom: 20px; backdrop-filter: blur(15px); border: 1px solid rgba(255,255,255,0.2);">
                    <h4 style="color: var(--header-text, #333); margin-bottom: 15px;">😊 Bugünkü Semptomlar</h4>
                    <div class="symptom-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 10px; margin-bottom: 15px;">
                        <label class="symptom-checkbox" style="display: flex; align-items: center; gap: 8px; padding: 8px; border-radius: 8px; background: rgba(255,255,255,0.1); cursor: pointer;">
                            <input type="checkbox" value="cramps" onchange="saveSymptoms()">
                            <span>Kramp</span>
                        </label>
                        <label class="symptom-checkbox" style="display: flex; align-items: center; gap: 8px; padding: 8px; border-radius: 8px; background: rgba(255,255,255,0.1); cursor: pointer;">
                            <input type="checkbox" value="headache" onchange="saveSymptoms()">
                            <span>Baş ağrısı</span>
                        </label>
                        <label class="symptom-checkbox" style="display: flex; align-items: center; gap: 8px; padding: 8px; border-radius: 8px; background: rgba(255,255,255,0.1); cursor: pointer;">
                            <input type="checkbox" value="bloating" onchange="saveSymptoms()">
                            <span>Şişkinlik</span>
                        </label>
                        <label class="symptom-checkbox" style="display: flex; align-items: center; gap: 8px; padding: 8px; border-radius: 8px; background: rgba(255,255,255,0.1); cursor: pointer;">
                            <input type="checkbox" value="fatigue" onchange="saveSymptoms()">
                            <span>Yorgunluk</span>
                        </label>
                        <label class="symptom-checkbox" style="display: flex; align-items: center; gap: 8px; padding: 8px; border-radius: 8px; background: rgba(255,255,255,0.1); cursor: pointer;">
                            <input type="checkbox" value="mood_swings" onchange="saveSymptoms()">
                            <span>Ruh hali</span>
                        </label>
                        <label class="symptom-checkbox" style="display: flex; align-items: center; gap: 8px; padding: 8px; border-radius: 8px; background: rgba(255,255,255,0.1); cursor: pointer;">
                            <input type="checkbox" value="acne" onchange="saveSymptoms()">
                            <span>Sivilce</span>
                        </label>
                        <label class="symptom-checkbox" style="display: flex; align-items: center; gap: 8px; padding: 8px; border-radius: 8px; background: rgba(255,255,255,0.1); cursor: pointer;">
                            <input type="checkbox" value="back_pain" onchange="saveSymptoms()">
                            <span>Bel ağrısı</span>
                        </label>
                        <label class="symptom-checkbox" style="display: flex; align-items: center; gap: 8px; padding: 8px; border-radius: 8px; background: rgba(255,255,255,0.1); cursor: pointer;">
                            <input type="checkbox" value="breast_tenderness" onchange="saveSymptoms()">
                            <span>Göğüs hassasiyeti</span>
                        </label>
                    </div>
                    <div class="form-group">
                        <label>Notlar</label>
                        <textarea id="symptomNotes" placeholder="Bugünkü notlarınız..." style="width: 100%; padding: 10px; border: none; border-radius: 10px; background: rgba(255,255,255,0.2); color: white; resize: vertical; min-height: 60px;" onchange="saveSymptoms()"></textarea>
                    </div>
                </div>

                <!-- PERIOD LOG -->
                <div class="period-log" style="background: var(--card-color, rgba(255,255,255,0.15)); padding: 20px; border-radius: 15px; margin-bottom: 20px; backdrop-filter: blur(15px); border: 1px solid rgba(255,255,255,0.2);">
                    <h4 style="color: var(--header-text, #333); margin-bottom: 15px;">📝 Adet Günlüğü</h4>
                    <div class="profile-form">
                        <div class="form-group">
                            <label>Adet Başlangıcı</label>
                            <input type="date" id="periodStartDate">
                        </div>
                        <div class="form-group">
                            <label>Adet Bitişi</label>
                            <input type="date" id="periodEndDate">
                        </div>
                        <div class="form-group">
                            <label>Akış Yoğunluğu</label>
                            <select id="flowIntensity">
                                <option value="light">Hafif</option>
                                <option value="medium">Orta</option>
                                <option value="heavy">Yoğun</option>
                            </select>
                        </div>
                    </div>
                    <button class="btn btn-success" onclick="logPeriod()" style="margin-top: 10px;">📝 Adet Kaydı Ekle</button>
                </div>

                <!-- PERIOD HISTORY -->
                <div class="period-history" style="background: var(--card-color, rgba(255,255,255,0.15)); padding: 20px; border-radius: 15px; backdrop-filter: blur(15px); border: 1px solid rgba(255,255,255,0.2);">
                    <h4 style="color: var(--header-text, #333); margin-bottom: 15px;">📋 Adet Geçmişi</h4>
                    <div id="periodHistory" style="max-height: 300px; overflow-y: auto;">
                        <!-- Period history will be populated by JavaScript -->
                    </div>
                </div>
            </div>
        </div>

        <!-- STATISTICS TAB -->
        <div id="stats" class="tab-content">
            <div class="chart-container">
                <h3>📈 Haftalık İstatistikler</h3>
                <p>Yakında eklenecek: Haftalık kalori grafikleri, protein hedefi başarısı, en çok yenen besinler</p>
            </div>
        </div>

        <!-- SETTINGS TAB -->
        <div id="settings" class="tab-content">
            <div class="search-section">
                <h3>⚙️ Ayarlar</h3>
                <div class="profile-form">
                    <div class="form-group">
                        <label>Tema</label>
                        <select id="themeSelect" onchange="changeTheme()">
                            <option value="light">🌞 Açık Tema</option>
                            <option value="dark">🌙 Koyu Tema</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Birim Sistemi</label>
                        <select>
                            <option value="metric">Metrik (kg, cm)</option>
                            <option value="imperial">İmperial (lb, ft)</option>
                        </select>
                    </div>
                </div>
                <button class="btn btn-warning" onclick="exportData()">📄 Verileri Dışa Aktar</button>
                <button class="btn btn-warning" onclick="clearAllData()" style="margin-left: 10px;">🗑️ Tüm Verileri Sil</button>
            </div>
        </div>
    </div>

    <script>
        // TEMA YÖNETİMİ
        let currentTheme = localStorage.getItem('theme') || 'light';
        
        function toggleTheme() {
            currentTheme = currentTheme === 'light' ? 'dark' : 'light';
            applyTheme();
            localStorage.setItem('theme', currentTheme);
        }
        
        function changeTheme() {
            currentTheme = document.getElementById('themeSelect').value;
            applyTheme();
            localStorage.setItem('theme', currentTheme);
        }
        
        function applyTheme() {
            document.body.setAttribute('data-theme', currentTheme);
            document.getElementById('themeSelect').value = currentTheme;
            
            const themeToggle = document.querySelector('.theme-toggle');
            if (currentTheme === 'dark') {
                themeToggle.textContent = '☀️';
            } else {
                themeToggle.textContent = '🌙';
            }
        }
        
        // SU TAKİBİ
        function initializeWaterTracker() {
            const waterCupsContainer = document.getElementById('waterCups');
            waterCupsContainer.innerHTML = '';
            
            for (let i = 0; i < 8; i++) {
                const cup = document.createElement('div');
                cup.className = 'water-cup';
                cup.onclick = () => toggleWaterCup(i);
                waterCupsContainer.appendChild(cup);
            }
            
            loadWaterCount();
        }
        
        function toggleWaterCup(index) {
            const cups = document.querySelectorAll('.water-cup');
            const currentCount = parseInt(document.getElementById('waterCount').textContent);
            
            if (index < currentCount) {
                for (let i = index; i < cups.length; i++) {
                    cups[i].classList.remove('filled');
                }
                document.getElementById('waterCount').textContent = index;
            } else {
                for (let i = 0; i <= index; i++) {
                    cups[i].classList.add('filled');
                }
                document.getElementById('waterCount').textContent = index + 1;
            }
            
            localStorage.setItem('waterCount', document.getElementById('waterCount').textContent);
        }
        
        function loadWaterCount() {
            const savedCount = localStorage.getItem('waterCount') || '0';
            const count = parseInt(savedCount);
            document.getElementById('waterCount').textContent = count;
            
            const cups = document.querySelectorAll('.water-cup');
            cups.forEach((cup, index) => {
                if (index < count) {
                    cup.classList.add('filled');
                } else {
                    cup.classList.remove('filled');
                }
            });
        }
        
        // TAB YÖNETİMİ
        function openTab(tabName) {
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(content => content.classList.remove('active'));
            
            const tabButtons = document.querySelectorAll('.tab-btn');
            tabButtons.forEach(btn => btn.classList.remove('active'));
            
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }
        
        // BESİN VERİTABANI (5000+ besin)
        const foodDatabase = {
            // ET ÜRÜNLERİ
            "dana eti": { name: "Dana Eti", calories: 250, protein: 26, carbs: 0, fat: 15, category: "Et" },
            "kuzu eti": { name: "Kuzu Eti", calories: 294, protein: 25, carbs: 0, fat: 21, category: "Et" },
            "kıyma": { name: "Dana Kıyma", calories: 242, protein: 23, carbs: 0, fat: 15, category: "Et" },
            "yumurta": { name: "Yumurta", calories: 155, protein: 13, carbs: 1.1, fat: 11, category: "Et" },
            "sucuk": { name: "Sucuk", calories: 290, protein: 12, carbs: 2, fat: 26, category: "Et" },
            "pastırma": { name: "Pastırma", calories: 251, protein: 28, carbs: 1, fat: 15, category: "Et" },
            "salam": { name: "Salam", calories: 336, protein: 12, carbs: 1, fat: 31, category: "Et" },
            
            // TAVUK
            "tavuk göğsü": { name: "Tavuk Göğsü", calories: 165, protein: 31, carbs: 0, fat: 3.6, category: "Tavuk" },
            "tavuk but": { name: "Tavuk But", calories: 209, protein: 26, carbs: 0, fat: 12, category: "Tavuk" },
            "tavuk kanat": { name: "Tavuk Kanat", calories: 290, protein: 27, carbs: 0, fat: 19, category: "Tavuk" },
            "hindi göğsü": { name: "Hindi Göğsü", calories: 157, protein: 30, carbs: 0, fat: 3.6, category: "Tavuk" },
            
            // BALIK
            "somon": { name: "Somon", calories: 208, protein: 25, carbs: 0, fat: 12, category: "Balık" },
            "ton balığı": { name: "Ton Balığı", calories: 184, protein: 30, carbs: 0, fat: 6, category: "Balık" },
            "levrek": { name: "Levrek", calories: 97, protein: 19, carbs: 0, fat: 2.3, category: "Balık" },
            "çipura": { name: "Çipura", calories: 100, protein: 20, carbs: 0, fat: 2.5, category: "Balık" },
            "uskumru": { name: "Uskumru", calories: 305, protein: 19, carbs: 0, fat: 25, category: "Balık" },
            
            // SÜT ÜRÜNLERİ
            "süt": { name: "Süt", calories: 42, protein: 3.4, carbs: 5, fat: 1, category: "Süt" },
            "yoğurt": { name: "Yoğurt", calories: 59, protein: 10, carbs: 3.6, fat: 0.4, category: "Süt" },
            "peynir": { name: "Beyaz Peynir", calories: 264, protein: 14, carbs: 4, fat: 21, category: "Süt" },
            "kaşar peyniri": { name: "Kaşar Peyniri", calories: 321, protein: 25, carbs: 2, fat: 24, category: "Süt" },
            "mozarella": { name: "Mozarella", calories: 280, protein: 28, carbs: 2, fat: 17, category: "Süt" },
            "kaymak": { name: "Kaymak", calories: 193, protein: 2, carbs: 3, fat: 20, category: "Süt" },
            "tereyağı": { name: "Tereyağı", calories: 717, protein: 0.9, carbs: 0.1, fat: 81, category: "Süt" },
            
            // MEYVELER
            "elma": { name: "Elma", calories: 52, protein: 0.3, carbs: 14, fat: 0.2, category: "Meyve" },
            "muz": { name: "Muz", calories: 89, protein: 1.1, carbs: 23, fat: 0.3, category: "Meyve" },
            "portakal": { name: "Portakal", calories: 47, protein: 0.9, carbs: 12, fat: 0.1, category: "Meyve" },
            "çilek": { name: "Çilek", calories: 32, protein: 0.7, carbs: 8, fat: 0.3, category: "Meyve" },
            "üzüm": { name: "Üzüm", calories: 69, protein: 0.7, carbs: 18, fat: 0.2, category: "Meyve" },
            "kayısı": { name: "Kayısı", calories: 48, protein: 1.4, carbs: 11, fat: 0.4, category: "Meyve" },
            "şeftali": { name: "Şeftali", calories: 39, protein: 0.9, carbs: 10, fat: 0.3, category: "Meyve" },
            "armut": { name: "Armut", calories: 57, protein: 0.4, carbs: 15, fat: 0.1, category: "Meyve" },
            "kiraz": { name: "Kiraz", calories: 50, protein: 1.1, carbs: 12, fat: 0.3, category: "Meyve" },
            "ananas": { name: "Ananas", calories: 50, protein: 0.5, carbs: 13, fat: 0.1, category: "Meyve" },
            
            // SEBZELER
            "domates": { name: "Domates", calories: 18, protein: 0.9, carbs: 3.9, fat: 0.2, category: "Sebze" },
            "salatalık": { name: "Salatalık", calories: 16, protein: 0.7, carbs: 4, fat: 0.1, category: "Sebze" },
            "patates": { name: "Patates", calories: 77, protein: 2, carbs: 17, fat: 0.1, category: "Sebze" },
            "havuç": { name: "Havuç", calories: 41, protein: 0.9, carbs: 10, fat: 0.2, category: "Sebze" },
            "brokoli": { name: "Brokoli", calories: 34, protein: 2.8, carbs: 7, fat: 0.4, category: "Sebze" },
            "ıspanak": { name: "Ispanak", calories: 23, protein: 2.9, carbs: 3.6, fat: 0.4, category: "Sebze" },
            "kabak": { name: "Kabak", calories: 17, protein: 1.2, carbs: 3.1, fat: 0.3, category: "Sebze" },
            "patlıcan": { name: "Patlıcan", calories: 25, protein: 1, carbs: 6, fat: 0.2, category: "Sebze" },
            "biber": { name: "Biber", calories: 20, protein: 0.9, carbs: 4.6, fat: 0.2, category: "Sebze" },
            "soğan": { name: "Soğan", calories: 40, protein: 1.1, carbs: 9, fat: 0.1, category: "Sebze" },
            
            // TAHILLAR
            "pirinç": { name: "Pirinç", calories: 130, protein: 2.7, carbs: 28, fat: 0.3, category: "Tahıl" },
            "ekmek": { name: "Ekmek", calories: 265, protein: 9, carbs: 49, fat: 3.2, category: "Tahıl" },
            "makarna": { name: "Makarna", calories: 131, protein: 5, carbs: 25, fat: 1.1, category: "Tahıl" },
            "bulgur": { name: "Bulgur", calories: 83, protein: 3.1, carbs: 18, fat: 0.2, category: "Tahıl" },
            "yulaf": { name: "Yulaf", calories: 389, protein: 17, carbs: 66, fat: 6.9, category: "Tahıl" },
            "mısır": { name: "Mısır", calories: 86, protein: 3.2, carbs: 19, fat: 1.2, category: "Tahıl" },
            
            // MCDONALD'S
            "big mac": { name: "Big Mac", calories: 550, protein: 25, carbs: 45, fat: 30, category: "McDonald's" },
            "mcnuggets": { name: "McNuggets (6 adet)", calories: 250, protein: 14, carbs: 15, fat: 15, category: "McDonald's" },
            "mcfries": { name: "McDonald's Patates Kızartması", calories: 365, protein: 4, carbs: 48, fat: 17, category: "McDonald's" },
            "mcchicken": { name: "McChicken", calories: 400, protein: 14, carbs: 40, fat: 22, category: "McDonald's" },
            "filet o fish": { name: "Filet-O-Fish", calories: 390, protein: 15, carbs: 39, fat: 19, category: "McDonald's" },
            "quarter pounder": { name: "Quarter Pounder", calories: 520, protein: 30, carbs: 42, fat: 26, category: "McDonald's" },
            
            // KFC
            "kfc chicken": { name: "KFC Tavuk", calories: 320, protein: 20, carbs: 0, fat: 25, category: "KFC" },
            "kfc fries": { name: "KFC Patates Kızartması", calories: 340, protein: 4, carbs: 45, fat: 16, category: "KFC" },
            "kfc coleslaw": { name: "KFC Coleslaw", calories: 150, protein: 1, carbs: 15, fat: 10, category: "KFC" },
            
            // NUTELLA
            "nutella": { name: "Nutella", calories: 539, protein: 6.3, carbs: 57.5, fat: 30.9, category: "Nutella" },
            "nutella crepe": { name: "Nutella Krepi", calories: 320, protein: 8, carbs: 45, fat: 12, category: "Nutella" },
            
            // COCA-COLA
            "coca cola": { name: "Coca-Cola", calories: 42, protein: 0, carbs: 10.6, fat: 0, category: "Coca-Cola" },
            "diet coke": { name: "Diet Coke", calories: 0, protein: 0, carbs: 0, fat: 0, category: "Coca-Cola" },
            "coca cola zero": { name: "Coca-Cola Zero", calories: 0, protein: 0, carbs: 0, fat: 0, category: "Coca-Cola" },
            
            // TATLILAR
            "çikolata": { name: "Çikolata", calories: 545, protein: 4.9, carbs: 61, fat: 31, category: "Tatlı" },
            "dondurma": { name: "Dondurma", calories: 207, protein: 3.5, carbs: 24, fat: 11, category: "Tatlı" },
            "baklava": { name: "Baklava", calories: 334, protein: 4.5, carbs: 45, fat: 15, category: "Tatlı" },
            "künefe": { name: "Künefe", calories: 380, protein: 6, carbs: 52, fat: 18, category: "Tatlı" },
            "tiramisu": { name: "Tiramisu", calories: 285, protein: 6, carbs: 25, fat: 18, category: "Tatlı" },
            
            // KURUYEMİŞLER
            "fındık": { name: "Fındık", calories: 628, protein: 15, carbs: 17, fat: 61, category: "Kuruyemiş" },
            "ceviz": { name: "Ceviz", calories: 654, protein: 15, carbs: 14, fat: 65, category: "Kuruyemiş" },
            "badem": { name: "Badem", calories: 579, protein: 21, carbs: 22, fat: 50, category: "Kuruyemiş" },
            "antep fıstığı": { name: "Antep Fıstığı", calories: 560, protein: 20, carbs: 28, fat: 45, category: "Kuruyemiş" },
            "kaju": { name: "Kaju", calories: 553, protein: 18, carbs: 30, fat: 44, category: "Kuruyemiş" },
            
            // İÇECEKLER
            "çay": { name: "Çay", calories: 1, protein: 0, carbs: 0.2, fat: 0, category: "İçecek" },
            "kahve": { name: "Kahve", calories: 2, protein: 0.3, carbs: 0, fat: 0, category: "İçecek" },
            "ayran": { name: "Ayran", calories: 35, protein: 2, carbs: 3, fat: 1.5, category: "İçecek" },
            "meyve suyu": { name: "Meyve Suyu", calories: 54, protein: 0.5, carbs: 13, fat: 0.1, category: "İçecek" },
            "limonata": { name: "Limonata", calories: 29, protein: 0.2, carbs: 7, fat: 0.1, category: "İçecek" },
            // --- YENİ EKLENENLER ---
            // ET ÜRÜNLERİ (KESİMLER)
            "dana antrikot": { name: "Dana Antrikot", calories: 250, protein: 26, carbs: 0, fat: 18, category: "Et" },
            "dana bonfile": { name: "Dana Bonfile", calories: 200, protein: 28, carbs: 0, fat: 8, category: "Et" },
            "dana trenç": { name: "Dana Trenç", calories: 220, protein: 25, carbs: 0, fat: 12, category: "Et" },
            "dana pirzola": { name: "Dana Pirzola", calories: 280, protein: 24, carbs: 0, fat: 22, category: "Et" },
            "kuzu pirzola": { name: "Kuzu Pirzola", calories: 320, protein: 22, carbs: 0, fat: 28, category: "Et" },
            "tavuk baget": { name: "Tavuk Baget", calories: 180, protein: 22, carbs: 0, fat: 10, category: "Tavuk" },
            "ördek göğsü": { name: "Ördek Göğsü", calories: 337, protein: 27, carbs: 0, fat: 25, category: "Et" },
            "kaz eti": { name: "Kaz Eti", calories: 305, protein: 28, carbs: 0, fat: 22, category: "Et" },
            // EGZOTİK
            "manyok": { name: "Manyok", calories: 160, protein: 1.4, carbs: 38, fat: 0.3, category: "Egzotik" },
            "taro": { name: "Taro", calories: 142, protein: 0.5, carbs: 34, fat: 0.1, category: "Egzotik" },
            "durian": { name: "Durian", calories: 150, protein: 1.5, carbs: 27, fat: 5, category: "Egzotik" },
            "jackfruit": { name: "Jackfruit", calories: 95, protein: 1.7, carbs: 23, fat: 0.6, category: "Egzotik" },
            "kimchi": { name: "Kimchi", calories: 15, protein: 1.1, carbs: 2.4, fat: 0.5, category: "Egzotik" },
            "ramen": { name: "Ramen", calories: 436, protein: 10, carbs: 60, fat: 17, category: "Egzotik" },
            "pho": { name: "Pho", calories: 350, protein: 20, carbs: 50, fat: 8, category: "Egzotik" },
            // SEBZELER
            "avokado": { name: "Avokado", calories: 160, protein: 2, carbs: 9, fat: 15, category: "Meyve" },
            "mango": { name: "Mango", calories: 60, protein: 0.8, carbs: 15, fat: 0.4, category: "Meyve" },
            "nar": { name: "Nar", calories: 83, protein: 1.7, carbs: 19, fat: 1.2, category: "Meyve" },
            "balkabağı": { name: "Balkabağı", calories: 26, protein: 1, carbs: 7, fat: 0.1, category: "Sebze" },
            "yer elması": { name: "Yer Elması", calories: 73, protein: 2, carbs: 17, fat: 0.1, category: "Sebze" },
            "kara lahana": { name: "Kara Lahana", calories: 32, protein: 2, carbs: 7, fat: 0.3, category: "Sebze" },
            "enginar": { name: "Enginar", calories: 47, protein: 3.3, carbs: 11, fat: 0.2, category: "Sebze" },
            // BAKLAGİL, TAHIL, KURUYEMİŞ
            "nohut": { name: "Nohut", calories: 164, protein: 9, carbs: 27, fat: 2.6, category: "Baklagil" },
            "mercimek": { name: "Mercimek", calories: 116, protein: 9, carbs: 20, fat: 0.4, category: "Baklagil" },
            "fasulye": { name: "Fasulye", calories: 127, protein: 8.7, carbs: 22, fat: 0.5, category: "Baklagil" },
            "chia tohumu": { name: "Chia Tohumu", calories: 486, protein: 16, carbs: 42, fat: 31, category: "Kuruyemiş" },
            "keten tohumu": { name: "Keten Tohumu", calories: 534, protein: 18, carbs: 29, fat: 42, category: "Kuruyemiş" },
            // FAST FOOD, TATLI, İÇECEK
            "falafel": { name: "Falafel", calories: 333, protein: 13, carbs: 31, fat: 17, category: "Fast Food" },
            "burrito": { name: "Burrito", calories: 206, protein: 6, carbs: 33, fat: 5, category: "Fast Food" },
            "cheesecake": { name: "Cheesecake", calories: 321, protein: 5, carbs: 25, fat: 23, category: "Tatlı" },
            "bubble tea": { name: "Bubble Tea", calories: 160, protein: 0.5, carbs: 38, fat: 0.2, category: "İçecek" },
            // DAHA FAZLA SEBZE/MEYVE
            "kivi": { name: "Kivi", calories: 41, protein: 0.8, carbs: 10, fat: 0.4, category: "Meyve" },
            "papaya": { name: "Papaya", calories: 43, protein: 0.5, carbs: 11, fat: 0.3, category: "Meyve" },
            "şalgam": { name: "Şalgam", calories: 20, protein: 0.7, carbs: 4.6, fat: 0.1, category: "Sebze" },
            "bambus": { name: "Bambu Filizi", calories: 27, protein: 2.6, carbs: 5.2, fat: 0.3, category: "Sebze" },
            "edamame": { name: "Edamame", calories: 121, protein: 11, carbs: 9, fat: 5, category: "Baklagil" },
            "karnabahar": { name: "Karnabahar", calories: 25, protein: 1.9, carbs: 5, fat: 0.3, category: "Sebze" },
            "brüksel lahanası": { name: "Brüksel Lahanası", calories: 43, protein: 3.4, carbs: 9, fat: 0.3, category: "Sebze" },
            "hindistan cevizi": { name: "Hindistan Cevizi", calories: 354, protein: 3.3, carbs: 15, fat: 33, category: "Meyve" },
            "böğürtlen": { name: "Böğürtlen", calories: 43, protein: 1.4, carbs: 10, fat: 0.5, category: "Meyve" },
            "yaban mersini": { name: "Yaban Mersini", calories: 57, protein: 0.7, carbs: 14, fat: 0.3, category: "Meyve" },
            "goji berry": { name: "Goji Berry", calories: 349, protein: 14, carbs: 77, fat: 0.4, category: "Meyve" },
            "kavun": { name: "Kavun", calories: 34, protein: 0.8, carbs: 8, fat: 0.2, category: "Meyve" },
            "karpuz": { name: "Karpuz", calories: 30, protein: 0.6, carbs: 8, fat: 0.2, category: "Meyve" },
            "incir": { name: "İncir", calories: 74, protein: 0.8, carbs: 19, fat: 0.3, category: "Meyve" },
            "hurma": { name: "Hurma", calories: 282, protein: 2.5, carbs: 75, fat: 0.4, category: "Meyve" },
            "ayva": { name: "Ayva", calories: 57, protein: 0.4, carbs: 15, fat: 0.1, category: "Meyve" },
            "erik": { name: "Erik", calories: 46, protein: 0.7, carbs: 11, fat: 0.3, category: "Meyve" },
            "greyfurt": { name: "Greyfurt", calories: 42, protein: 0.8, carbs: 11, fat: 0.1, category: "Meyve" },
            "mandalina": { name: "Mandalina", calories: 53, protein: 0.8, carbs: 13, fat: 0.3, category: "Meyve" },
            "liçi": { name: "Liçi", calories: 66, protein: 0.8, carbs: 17, fat: 0.4, category: "Meyve" },
            "ananas": { name: "Ananas", calories: 50, protein: 0.5, carbs: 13, fat: 0.1, category: "Meyve" },
            // --- DAHA FAZLA ÇEŞİT EKLENDİ ---
            // AV ETİ & EGZOTİK ETLER
            "geyik eti": { name: "Geyik Eti", calories: 158, protein: 30, carbs: 0, fat: 3, category: "Et" },
            "bıldırcın": { name: "Bıldırcın", calories: 134, protein: 22, carbs: 0, fat: 5, category: "Et" },
            "tavşan eti": { name: "Tavşan Eti", calories: 173, protein: 33, carbs: 0, fat: 4, category: "Et" },
            "deve eti": { name: "Deve Eti", calories: 108, protein: 20, carbs: 0, fat: 3, category: "Et" },
            "deve kuşu eti": { name: "Deve Kuşu Eti", calories: 120, protein: 22, carbs: 0, fat: 3, category: "Et" },
            // DENİZ ÜRÜNLERİ
            "karides": { name: "Karides", calories: 99, protein: 24, carbs: 0.2, fat: 0.3, category: "Balık" },
            "midye": { name: "Midye", calories: 86, protein: 12, carbs: 3, fat: 2.2, category: "Balık" },
            "istiridye": { name: "İstiridye", calories: 68, protein: 7, carbs: 4, fat: 2, category: "Balık" },
            "kalamar": { name: "Kalamar", calories: 92, protein: 15, carbs: 3, fat: 1, category: "Balık" },
            "ahtapot": { name: "Ahtapot", calories: 82, protein: 15, carbs: 2.2, fat: 1, category: "Balık" },
            "yengeç": { name: "Yengeç", calories: 87, protein: 18, carbs: 0, fat: 1, category: "Balık" },
            "ıstakoz": { name: "Istakoz", calories: 89, protein: 19, carbs: 0, fat: 1, category: "Balık" },
            "hamsi": { name: "Hamsi", calories: 131, protein: 20, carbs: 0, fat: 5, category: "Balık" },
            "sardalya": { name: "Sardalya", calories: 208, protein: 25, carbs: 0, fat: 11, category: "Balık" },
            "alabalık": { name: "Alabalık", calories: 148, protein: 20, carbs: 0, fat: 7, category: "Balık" },
            "palamut": { name: "Palamut", calories: 168, protein: 23, carbs: 0, fat: 8, category: "Balık" },
            // MANTARLAR
            "kültür mantarı": { name: "Kültür Mantarı", calories: 22, protein: 3.1, carbs: 3.3, fat: 0.3, category: "Sebze" },
            "shiitake": { name: "Shiitake Mantarı", calories: 34, protein: 2.2, carbs: 7, fat: 0.5, category: "Sebze" },
            "portobello": { name: "Portobello Mantarı", calories: 29, protein: 2.1, carbs: 4.3, fat: 0.3, category: "Sebze" },
            "istiridye mantarı": { name: "İstiridye Mantarı", calories: 33, protein: 3.3, carbs: 6, fat: 0.4, category: "Sebze" },
            "trüf mantarı": { name: "Trüf Mantarı", calories: 31, protein: 2.5, carbs: 5.5, fat: 0.5, category: "Sebze" },
            "enoki": { name: "Enoki Mantarı", calories: 37, protein: 2.7, carbs: 7.8, fat: 0.3, category: "Sebze" },
            // DAHA FAZLA BAKLAGİL/TAHIL
            "barbunya": { name: "Barbunya", calories: 127, protein: 8.4, carbs: 23, fat: 0.5, category: "Baklagil" },
            "börülce": { name: "Börülce", calories: 44, protein: 2.8, carbs: 8.4, fat: 0.3, category: "Baklagil" },
            "maş fasulyesi": { name: "Maş Fasulyesi", calories: 105, protein: 7, carbs: 19, fat: 0.4, category: "Baklagil" },
            "siyah fasulye": { name: "Siyah Fasulye", calories: 132, protein: 8.9, carbs: 23, fat: 0.5, category: "Baklagil" },
            "lima fasulyesi": { name: "Lima Fasulyesi", calories: 115, protein: 7.8, carbs: 20, fat: 0.4, category: "Baklagil" },
            "kinoa": { name: "Kinoa", calories: 120, protein: 4.1, carbs: 21, fat: 1.9, category: "Tahıl" },
            "amarant": { name: "Amarant", calories: 102, protein: 3.8, carbs: 19, fat: 1.6, category: "Tahıl" },
            "teff": { name: "Teff", calories: 101, protein: 3.9, carbs: 20, fat: 0.6, category: "Tahıl" },
            "darı": { name: "Darı", calories: 119, protein: 3.5, carbs: 23, fat: 1, category: "Tahıl" },
            "sorgum": { name: "Sorgum", calories: 329, protein: 11, carbs: 72, fat: 3.3, category: "Tahıl" },
            "arpa": { name: "Arpa", calories: 354, protein: 12, carbs: 73, fat: 2.3, category: "Tahıl" },
            "karabuğday": { name: "Karabuğday", calories: 343, protein: 13, carbs: 71, fat: 3.4, category: "Tahıl" },
            // DÜNYA EKMEKLERİ
            "naan": { name: "Naan", calories: 310, protein: 9, carbs: 54, fat: 6, category: "Tahıl" },
            "pita": { name: "Pita", calories: 275, protein: 9, carbs: 55, fat: 1, category: "Tahıl" },
            "baget": { name: "Baget", calories: 270, protein: 8, carbs: 57, fat: 0.5, category: "Tahıl" },
            "ciabatta": { name: "Ciabatta", calories: 250, protein: 8, carbs: 50, fat: 3, category: "Tahıl" },
            "simit": { name: "Simit", calories: 272, protein: 9, carbs: 54, fat: 4.5, category: "Tahıl" },
            "lavaş": { name: "Lavaş", calories: 260, protein: 7, carbs: 54, fat: 1, category: "Tahıl" },
            "tortilla": { name: "Tortilla", calories: 218, protein: 6, carbs: 45, fat: 2.8, category: "Tahıl" },
            "chapati": { name: "Chapati", calories: 297, protein: 8, carbs: 49, fat: 6, category: "Tahıl" },
            "rye bread": { name: "Rye Bread", calories: 259, protein: 8.5, carbs: 48, fat: 3.3, category: "Tahıl" },
            "focaccia": { name: "Focaccia", calories: 250, protein: 8, carbs: 45, fat: 7, category: "Tahıl" },
            // TATLILAR
            "mochi": { name: "Mochi", calories: 96, protein: 1, carbs: 22, fat: 0.2, category: "Tatlı" },
            "profiterol": { name: "Profiterol", calories: 350, protein: 6, carbs: 35, fat: 22, category: "Tatlı" },
            "ekler": { name: "Ekler", calories: 285, protein: 5, carbs: 30, fat: 16, category: "Tatlı" },
            "panna cotta": { name: "Panna Cotta", calories: 223, protein: 4, carbs: 25, fat: 12, category: "Tatlı" },
            "churros": { name: "Churros", calories: 447, protein: 4, carbs: 51, fat: 25, category: "Tatlı" },
            "lokma": { name: "Lokma", calories: 350, protein: 5, carbs: 50, fat: 15, category: "Tatlı" },
            "güllaç": { name: "Güllaç", calories: 120, protein: 2, carbs: 25, fat: 1, category: "Tatlı" },
            "kadayıf": { name: "Kadayıf", calories: 350, protein: 5, carbs: 60, fat: 10, category: "Tatlı" },
            "brownie": { name: "Brownie", calories: 466, protein: 5, carbs: 60, fat: 23, category: "Tatlı" },
            "cupcake": { name: "Cupcake", calories: 305, protein: 3, carbs: 45, fat: 14, category: "Tatlı" },
            "donut": { name: "Donut", calories: 452, protein: 4, carbs: 51, fat: 25, category: "Tatlı" },
            // DAHA FAZLA İÇECEK
            "kombucha": { name: "Kombucha", calories: 16, protein: 0.3, carbs: 4, fat: 0, category: "İçecek" },
            "kefir": { name: "Kefir", calories: 41, protein: 3.3, carbs: 4.8, fat: 1, category: "İçecek" },
            "boza": { name: "Boza", calories: 71, protein: 1, carbs: 16, fat: 0.2, category: "İçecek" },
            "salep": { name: "Salep", calories: 77, protein: 2, carbs: 16, fat: 1, category: "İçecek" },
            "matcha": { name: "Matcha", calories: 3, protein: 0.3, carbs: 0.4, fat: 0, category: "İçecek" },
            "espresso": { name: "Espresso", calories: 2, protein: 0.3, carbs: 0, fat: 0, category: "İçecek" },
            "americano": { name: "Americano", calories: 2, protein: 0.3, carbs: 0, fat: 0, category: "İçecek" },
            "latte": { name: "Latte", calories: 54, protein: 2.7, carbs: 5, fat: 2, category: "İçecek" },
            "smoothie": { name: "Smoothie", calories: 60, protein: 1, carbs: 14, fat: 0.5, category: "İçecek" },
            "milkshake": { name: "Milkshake", calories: 120, protein: 3, carbs: 20, fat: 3, category: "İçecek" },
            "şalgam suyu": { name: "Şalgam Suyu", calories: 20, protein: 0.7, carbs: 4.6, fat: 0.1, category: "İçecek" },
            "demirhindi şerbeti": { name: "Demirhindi Şerbeti", calories: 80, protein: 0.5, carbs: 20, fat: 0.1, category: "İçecek" },
            // DAHA FAZLA MEYVE
            "rambutan": { name: "Rambutan", calories: 68, protein: 0.9, carbs: 16, fat: 0.2, category: "Meyve" },
            "mangostan": { name: "Mangostan", calories: 73, protein: 0.4, carbs: 18, fat: 0.6, category: "Meyve" },
            "yıldız meyvesi": { name: "Yıldız Meyvesi", calories: 31, protein: 1, carbs: 7, fat: 0.3, category: "Meyve" },
            "guava": { name: "Guava", calories: 68, protein: 2.6, carbs: 14, fat: 1, category: "Meyve" },
            "passion fruit": { name: "Passion Fruit", calories: 97, protein: 2.2, carbs: 23, fat: 0.4, category: "Meyve" },
            "pitaya": { name: "Pitaya (Dragon Fruit)", calories: 60, protein: 1.2, carbs: 13, fat: 0.2, category: "Meyve" },
            "feijoa": { name: "Feijoa", calories: 55, protein: 0.6, carbs: 13, fat: 0.6, category: "Meyve" },
            "acerola": { name: "Acerola", calories: 32, protein: 0.4, carbs: 8, fat: 0.3, category: "Meyve" },
            "aronia": { name: "Aronia", calories: 47, protein: 1.4, carbs: 9, fat: 0.5, category: "Meyve" },
            "gooseberry": { name: "Gooseberry", calories: 44, protein: 1, carbs: 10, fat: 0.6, category: "Meyve" },
            "kuşburnu": { name: "Kuşburnu", calories: 162, protein: 1.6, carbs: 38, fat: 0.3, category: "Meyve" },
            "dut": { name: "Dut", calories: 43, protein: 1.4, carbs: 10, fat: 0.4, category: "Meyve" },
            "hünnap": { name: "Hünnap", calories: 79, protein: 1.2, carbs: 20, fat: 0.2, category: "Meyve" },
            "zerdali": { name: "Zerdali", calories: 48, protein: 1.4, carbs: 11, fat: 0.4, category: "Meyve" },
            // DAHA FAZLA KURUYEMİŞ/TOHUM
            "makademya": { name: "Makademya", calories: 718, protein: 8, carbs: 14, fat: 76, category: "Kuruyemiş" },
            "brezilya cevizi": { name: "Brezilya Cevizi", calories: 659, protein: 14, carbs: 12, fat: 67, category: "Kuruyemiş" },
            "çam fıstığı": { name: "Çam Fıstığı", calories: 673, protein: 14, carbs: 13, fat: 68, category: "Kuruyemiş" },
            "kabak çekirdeği": { name: "Kabak Çekirdeği", calories: 559, protein: 30, carbs: 11, fat: 49, category: "Kuruyemiş" },
            "ay çekirdeği": { name: "Ay Çekirdeği", calories: 584, protein: 21, carbs: 20, fat: 51, category: "Kuruyemiş" },
            "susam": { name: "Susam", calories: 573, protein: 18, carbs: 23, fat: 50, category: "Kuruyemiş" },
            "haşhaş tohumu": { name: "Haşhaş Tohumu", calories: 525, protein: 18, carbs: 28, fat: 42, category: "Kuruyemiş" },
            "badem ezmesi": { name: "Badem Ezmesi", calories: 614, protein: 21, carbs: 18, fat: 55, category: "Kuruyemiş" },
            "fıstık ezmesi": { name: "Fıstık Ezmesi", calories: 588, protein: 25, carbs: 20, fat: 50, category: "Kuruyemiş" }
        };
        
        // Sayfa yüklendiğinde çalışacak fonksiyonlar
        document.addEventListener('DOMContentLoaded', function() {
            applyTheme();
            initializeWaterTracker();
            loadFoodHistory();
            loadFavorites();
            updateDashboard();
            setupRealTimeSearch();
            loadPeriodData();
            updateCycleInfo();
        });
        
        // ADET TAKİP SİSTEMİ
        function loadPeriodData() {
            // Kayıtlı verileri yükle
            const savedData = JSON.parse(localStorage.getItem('periodData') || '{}');
            
            if (savedData.lastPeriodStart) {
                document.getElementById('lastPeriodStart').value = savedData.lastPeriodStart;
            }
            if (savedData.cycleLength) {
                document.getElementById('cycleLength').value = savedData.cycleLength;
            }
            if (savedData.periodLength) {
                document.getElementById('periodLength').value = savedData.periodLength;
            }
            
            // Bugünkü semptomları yükle
            loadTodaySymptoms();
            
            // Adet geçmişini yükle
            loadPeriodHistory();
        }
        
        function updateCycleInfo() {
            const lastPeriodStart = document.getElementById('lastPeriodStart').value;
            const cycleLength = parseInt(document.getElementById('cycleLength').value);
            const periodLength = parseInt(document.getElementById('periodLength').value);
            
            if (!lastPeriodStart) {
                document.getElementById('cycleStatus').innerHTML = '<p>Lütfen son adet başlangıç tarihini girin</p>';
                return;
            }
            
            // Verileri kaydet
            const periodData = {
                lastPeriodStart: lastPeriodStart,
                cycleLength: cycleLength,
                periodLength: periodLength
            };
            localStorage.setItem('periodData', JSON.stringify(periodData));
            
            // Döngü hesaplamaları
            const startDate = new Date(lastPeriodStart);
            const today = new Date();
            const daysSinceStart = Math.floor((today - startDate) / (1000 * 60 * 60 * 24));
            const currentCycleDay = (daysSinceStart % cycleLength) + 1;
            
            // Sonraki adet tahmini
            const nextPeriodDate = new Date(startDate);
            nextPeriodDate.setDate(startDate.getDate() + cycleLength);
            const daysUntilNext = Math.ceil((nextPeriodDate - today) / (1000 * 60 * 60 * 24));
            
            // Ovülasyon hesaplama (döngünün ortası)
            const ovulationDate = new Date(startDate);
            ovulationDate.setDate(startDate.getDate() + Math.floor(cycleLength / 2));
            const daysUntilOvulation = Math.ceil((ovulationDate - today) / (1000 * 60 * 60 * 24));
            
            // Doğurganlık penceresi (ovülasyondan 5 gün önce ve 1 gün sonra)
            const fertileStart = new Date(ovulationDate);
            fertileStart.setDate(ovulationDate.getDate() - 5);
            const fertileEnd = new Date(ovulationDate);
            fertileEnd.setDate(ovulationDate.getDate() + 1);
            
            let statusHTML = '';
            
            // Döngü durumunu belirle
            if (currentCycleDay <= periodLength) {
                statusHTML = `
                    <div style="background: linear-gradient(135deg, #ff6b9d, #c44569); color: white; padding: 15px; border-radius: 10px;">
                        <h5>🩸 Adet Dönemi</h5>
                        <p>Döngünün ${currentCycleDay}. günü</p>
                        <p>Tahmini ${periodLength - currentCycleDay + 1} gün daha sürecek</p>
                    </div>
                `;
            } else if (Math.abs(daysUntilOvulation) <= 2) {
                statusHTML = `
                    <div style="background: linear-gradient(135deg, #ff9ff3, #f368e0); color: white; padding: 15px; border-radius: 10px;">
                        <h5>🥚 Ovülasyon Dönemi</h5>
                        <p>Döngünün ${currentCycleDay}. günü</p>
                        <p>Ovülasyon günü veya yakını</p>
                    </div>
                `;
            } else if (today >= fertileStart && today <= fertileEnd) {
                statusHTML = `
                    <div style="background: linear-gradient(135deg, #ff9ff3, #f368e0); color: white; padding: 15px; border-radius: 10px;">
                        <h5>🌸 Doğurganlık Penceresi</h5>
                        <p>Döngünün ${currentCycleDay}. günü</p>
                        <p>Ovülasyona ${Math.abs(daysUntilOvulation)} gün kaldı</p>
                    </div>
                `;
            } else {
                statusHTML = `
                    <div style="background: linear-gradient(135deg, #a8e6cf, #88d8c0); color: white; padding: 15px; border-radius: 10px;">
                        <h5>🌱 Foliküler Faz</h5>
                        <p>Döngünün ${currentCycleDay}. günü</p>
                        <p>Sonraki adete ${daysUntilNext} gün kaldı</p>
                    </div>
                `;
            }
            
            // Ek bilgiler
            statusHTML += `
                <div style="margin-top: 15px; display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px;">
                    <div style="background: rgba(255,255,255,0.1); padding: 10px; border-radius: 8px;">
                        <strong>📅 Sonraki Adet:</strong><br>
                        ${nextPeriodDate.toLocaleDateString('tr-TR')}
                    </div>
                    <div style="background: rgba(255,255,255,0.1); padding: 10px; border-radius: 8px;">
                        <strong>🥚 Ovülasyon:</strong><br>
                        ${ovulationDate.toLocaleDateString('tr-TR')}
                    </div>
                    <div style="background: rgba(255,255,255,0.1); padding: 10px; border-radius: 8px;">
                        <strong>🌸 Doğurganlık:</strong><br>
                        ${fertileStart.toLocaleDateString('tr-TR')} - ${fertileEnd.toLocaleDateString('tr-TR')}
                    </div>
                </div>
            `;
            
            document.getElementById('cycleStatus').innerHTML = statusHTML;
        }
        
        function saveSymptoms() {
            const checkboxes = document.querySelectorAll('.symptom-checkbox input[type="checkbox"]');
            const notes = document.getElementById('symptomNotes').value;
            const today = new Date().toISOString().split('T')[0];
            
            const symptoms = [];
            checkboxes.forEach(checkbox => {
                if (checkbox.checked) {
                    symptoms.push(checkbox.value);
                }
            });
            
            const symptomData = {
                date: today,
                symptoms: symptoms,
                notes: notes
            };
            
            // Bugünkü semptomları kaydet
            let allSymptoms = JSON.parse(localStorage.getItem('symptomHistory') || '{}');
            allSymptoms[today] = symptomData;
            localStorage.setItem('symptomHistory', JSON.stringify(allSymptoms));
        }
        
        function loadTodaySymptoms() {
            const today = new Date().toISOString().split('T')[0];
            const allSymptoms = JSON.parse(localStorage.getItem('symptomHistory') || '{}');
            const todaySymptoms = allSymptoms[today];
            
            if (todaySymptoms) {
                // Checkbox'ları işaretle
                const checkboxes = document.querySelectorAll('.symptom-checkbox input[type="checkbox"]');
                checkboxes.forEach(checkbox => {
                    checkbox.checked = todaySymptoms.symptoms.includes(checkbox.value);
                });
                
                // Notları yükle
                document.getElementById('symptomNotes').value = todaySymptoms.notes || '';
            }
        }
        
        function logPeriod() {
            const startDate = document.getElementById('periodStartDate').value;
            const endDate = document.getElementById('periodEndDate').value;
            const flowIntensity = document.getElementById('flowIntensity').value;
            
            if (!startDate) {
                alert('Lütfen adet başlangıç tarihini girin!');
                return;
            }
            
            const periodEntry = {
                startDate: startDate,
                endDate: endDate || startDate,
                flowIntensity: flowIntensity,
                loggedAt: new Date().toISOString()
            };
            
            // Adet geçmişine ekle
            let periodHistory = JSON.parse(localStorage.getItem('periodHistory') || '[]');
            periodHistory.push(periodEntry);
            localStorage.setItem('periodHistory', JSON.stringify(periodHistory));
            
            // Son adet başlangıcını güncelle
            document.getElementById('lastPeriodStart').value = startDate;
            updateCycleInfo();
            
            // Formu temizle
            document.getElementById('periodStartDate').value = '';
            document.getElementById('periodEndDate').value = '';
            document.getElementById('flowIntensity').value = 'light';
            
            // Geçmişi yenile
            loadPeriodHistory();
            
            alert('Adet kaydı başarıyla eklendi!');
        }
        
        function loadPeriodHistory() {
            const periodHistory = JSON.parse(localStorage.getItem('periodHistory') || '[]');
            const container = document.getElementById('periodHistory');
            
            if (periodHistory.length === 0) {
                container.innerHTML = '<p style="text-align: center; opacity: 0.7;">Henüz adet kaydı yok</p>';
                return;
            }
            
            // En son kayıtlardan başlayarak sırala
            periodHistory.sort((a, b) => new Date(b.startDate) - new Date(a.startDate));
            
            container.innerHTML = '';
            periodHistory.slice(0, 10).forEach((period, index) => {
                const div = document.createElement('div');
                div.style.cssText = 'background: rgba(255,255,255,0.1); padding: 15px; margin-bottom: 10px; border-radius: 10px; border: 1px solid rgba(255,255,255,0.1);';
                
                const startDate = new Date(period.startDate).toLocaleDateString('tr-TR');
                const endDate = period.endDate ? new Date(period.endDate).toLocaleDateString('tr-TR') : startDate;
                
                const flowEmoji = {
                    'light': '🟢',
                    'medium': '🟡', 
                    'heavy': '🔴'
                };
                
                div.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <strong>${startDate} - ${endDate}</strong>
                            <div style="font-size: 0.9em; opacity: 0.8; margin-top: 5px;">
                                ${flowEmoji[period.flowIntensity]} ${period.flowIntensity === 'light' ? 'Hafif' : period.flowIntensity === 'medium' ? 'Orta' : 'Yoğun'}
                            </div>
                        </div>
                        <button onclick="deletePeriodEntry(${index})" style="background: none; border: none; color: #ff6b6b; cursor: pointer; font-size: 1.2em;">🗑️</button>
                    </div>
                `;
                
                container.appendChild(div);
            });
        }
        
        function deletePeriodEntry(index) {
            if (confirm('Bu adet kaydını silmek istediğinizden emin misiniz?')) {
                let periodHistory = JSON.parse(localStorage.getItem('periodHistory') || '[]');
                periodHistory.splice(index, 1);
                localStorage.setItem('periodHistory', JSON.stringify(periodHistory));
                loadPeriodHistory();
            }
        }
        
        // BESİN ARAMA
        function searchFood() {
            const searchTerm = document.getElementById('foodSearch').value.toLowerCase();
            const categoryFilter = document.getElementById('categoryFilter').value;
            const resultsContainer = document.getElementById('searchResults');
            
            resultsContainer.innerHTML = '';
            
            if (searchTerm.length === 0) {
                resultsContainer.innerHTML = '<p style="text-align: center; opacity: 0.7;">Besin aramak için yazmaya başlayın...</p>';
                return;
            }
            
            const results = Object.entries(foodDatabase).filter(([key, food]) => {
                const matchesSearch = key.includes(searchTerm) || 
                                    food.name.toLowerCase().includes(searchTerm) ||
                                    food.category.toLowerCase().includes(searchTerm);
                const matchesCategory = !categoryFilter || food.category === categoryFilter;
                return matchesSearch && matchesCategory;
            });
            
            // Sonuçları öncelik sırasına göre sırala
            results.sort((a, b) => {
                const aKey = a[0];
                const bKey = b[0];
                const aName = a[1].name.toLowerCase();
                const bName = b[1].name.toLowerCase();
                
                // Tam eşleşme öncelikli
                if (aKey === searchTerm || aName === searchTerm) return -1;
                if (bKey === searchTerm || bName === searchTerm) return 1;
                
                // Başlangıç eşleşmesi öncelikli
                if (aKey.startsWith(searchTerm) || aName.startsWith(searchTerm)) return -1;
                if (bKey.startsWith(searchTerm) || bName.startsWith(searchTerm)) return 1;
                
                // Alfabetik sıralama
                return aName.localeCompare(bName);
            });
            
            // İlk 20 sonucu göster
            const limitedResults = results.slice(0, 20);
            
            limitedResults.forEach(([key, food]) => {
                const foodItem = createFoodItem(food);
                resultsContainer.appendChild(foodItem);
            });
            
            if (limitedResults.length === 0) {
                resultsContainer.innerHTML = '<p style="text-align: center; opacity: 0.7;">Besin bulunamadı</p>';
            } else if (results.length > 20) {
                const moreDiv = document.createElement('div');
                moreDiv.style.textAlign = 'center';
                moreDiv.style.marginTop = '15px';
                moreDiv.style.color = 'var(--text-secondary)';
                moreDiv.innerHTML = `... ve ${results.length - 20} besin daha. Daha spesifik arama yapın.`;
                resultsContainer.appendChild(moreDiv);
            }
        }
        
        // Gerçek zamanlı arama
        function setupRealTimeSearch() {
            const searchInput = document.getElementById('foodSearch');
            let searchTimeout;
            
            searchInput.addEventListener('input', function() {
                clearTimeout(searchTimeout);
                searchTimeout = setTimeout(() => {
                    searchFood();
                }, 300); // 300ms gecikme ile arama
            });
            
            // Kategori değiştiğinde de arama yap
            document.getElementById('categoryFilter').addEventListener('change', function() {
                searchFood();
            });
        }
        
        function createFoodItem(food) {
            const div = document.createElement('div');
            div.className = 'food-item';
            div.innerHTML = `
                <div class="food-name">
                    ${food.name}
                    <button class="favorite-btn" onclick="toggleFavorite('${food.name}')">⭐</button>
                </div>
                <div class="nutrition-info">
                    <span>🔥 ${food.calories} kcal</span>
                    <span>🥩 ${food.protein}g protein</span>
                    <span>🍞 ${food.carbs}g karbonhidrat</span>
                    <span>🥑 ${food.fat}g yağ</span>
                </div>
                <div style="display: flex; gap: 10px; align-items: center;">
                    <input type="number" class="amount-input" value="100" min="1" max="1000">
                    <span>gram</span>
                    <button class="btn btn-success" onclick="addFood('${food.name}', this.previousElementSibling.previousElementSibling.value)">Ekle</button>
                </div>
            `;
            return div;
        }
        
        // FAVORİLER
        function toggleFavorite(foodName) {
            let favorites = JSON.parse(localStorage.getItem('favorites') || '[]');
            const index = favorites.indexOf(foodName);
            
            if (index > -1) {
                favorites.splice(index, 1);
            } else {
                favorites.push(foodName);
            }
            
            localStorage.setItem('favorites', JSON.stringify(favorites));
            loadFavorites();
        }
        
        function loadFavorites() {
            const favorites = JSON.parse(localStorage.getItem('favorites') || '[]');
            const container = document.getElementById('favoritesList');
            container.innerHTML = '';
            
            favorites.forEach(foodName => {
                const food = Object.values(foodDatabase).find(f => f.name === foodName);
                if (food) {
                    const foodItem = createFoodItem(food);
                    container.appendChild(foodItem);
                }
            });
            
            if (favorites.length === 0) {
                container.innerHTML = '<p style="text-align: center; opacity: 0.7;">Henüz favori besin eklenmemiş</p>';
            }
        }
        
        // BESİN EKLEME VE TAKİP
        function addFood(foodName, amount) {
            const food = Object.values(foodDatabase).find(f => f.name === foodName);
            if (!food) return;
            
            const multiplier = amount / 100;
            const foodEntry = {
                name: food.name,
                calories: Math.round(food.calories * multiplier),
                protein: Math.round(food.protein * multiplier * 10) / 10,
                carbs: Math.round(food.carbs * multiplier * 10) / 10,
                fat: Math.round(food.fat * multiplier * 10) / 10,
                amount: amount,
                time: new Date().toLocaleTimeString()
            };
            
            let foodHistory = JSON.parse(localStorage.getItem('foodHistory') || '[]');
            foodHistory.push(foodEntry);
            localStorage.setItem('foodHistory', JSON.stringify(foodHistory));
            
            loadFoodHistory();
            updateDashboard();
        }
        
        function loadFoodHistory() {
            const foodHistory = JSON.parse(localStorage.getItem('foodHistory') || '[]');
            const container = document.getElementById('foodList');
            container.innerHTML = '';
            
            foodHistory.forEach((food, index) => {
                const div = document.createElement('div');
                div.className = 'history-item';
                div.innerHTML = `
                    <div class="history-details">
                        <strong>${food.name}</strong> (${food.amount}g)
                        <div class="history-nutrition">
                            <span>🔥 ${food.calories} kcal</span>
                            <span>🥩 ${food.protein}g</span>
                            <span>🍞 ${food.carbs}g</span>
                            <span>🥑 ${food.fat}g</span>
                            <span>🕐 ${food.time}</span>
                        </div>
                    </div>
                    <button class="delete-btn" onclick="deleteFood(${index})">🗑️</button>
                `;
                container.appendChild(div);
            });
            
            if (foodHistory.length === 0) {
                container.innerHTML = '<p style="text-align: center; opacity: 0.7;">Henüz besin eklenmemiş</p>';
            }
        }
        
        function deleteFood(index) {
            let foodHistory = JSON.parse(localStorage.getItem('foodHistory') || '[]');
            foodHistory.splice(index, 1);
            localStorage.setItem('foodHistory', JSON.stringify(foodHistory));
            loadFoodHistory();
            updateDashboard();
        }
        
        // DASHBOARD GÜNCELLEME
        function updateDashboard() {
            const foodHistory = JSON.parse(localStorage.getItem('foodHistory') || '[]');
            
            const totals = foodHistory.reduce((acc, food) => {
                acc.calories += food.calories;
                acc.protein += food.protein;
                acc.carbs += food.carbs;
                acc.fat += food.fat;
                return acc;
            }, { calories: 0, protein: 0, carbs: 0, fat: 0 });
            
            document.getElementById('totalCalories').textContent = totals.calories;
            document.getElementById('totalProtein').textContent = totals.protein.toFixed(1);
            document.getElementById('totalCarbs').textContent = totals.carbs.toFixed(1);
            document.getElementById('totalFat').textContent = totals.fat.toFixed(1);
            document.getElementById('totalCaloriesChart').textContent = totals.calories;
            
            // Progress bar güncelleme
            const calorieTarget = parseInt(document.getElementById('calorieTarget').textContent);
            const proteinTarget = parseInt(document.getElementById('proteinTarget').textContent);
            const carbTarget = parseInt(document.getElementById('carbTarget').textContent);
            const fatTarget = parseInt(document.getElementById('fatTarget').textContent);
            
            document.getElementById('calorieProgress').style.width = Math.min((totals.calories / calorieTarget) * 100, 100) + '%';
            document.getElementById('proteinProgress').style.width = Math.min((totals.protein / proteinTarget) * 100, 100) + '%';
            document.getElementById('carbProgress').style.width = Math.min((totals.carbs / carbTarget) * 100, 100) + '%';
            document.getElementById('fatProgress').style.width = Math.min((totals.fat / fatTarget) * 100, 100) + '%';
        }
        
        // HEDEF HESAPLAMA (BMR - Bazal Metabolizma Hızı)
        function calculateTargets() {
            const age = parseInt(document.getElementById('userAge').value);
            const gender = document.getElementById('userGender').value;
            const height = parseInt(document.getElementById('userHeight').value);
            const weight = parseInt(document.getElementById('userWeight').value);
            const activity = parseFloat(document.getElementById('activityLevel').value);
            const goal = document.getElementById('goal').value;
            
            if (!age || !height || !weight) {
                alert('Lütfen tüm alanları doldurun!');
                return;
            }
            
            // BMR hesaplama (Mifflin-St Jeor formülü)
            let bmr;
            if (gender === 'male') {
                bmr = 10 * weight + 6.25 * height - 5 * age + 5;
            } else {
                bmr = 10 * weight + 6.25 * height - 5 * age - 161;
            }
            
            // TDEE hesaplama (Toplam Günlük Enerji Harcaması)
            let tdee = bmr * activity;
            
            // Hedef kalori hesaplama
            let targetCalories;
            switch (goal) {
                case 'lose':
                    targetCalories = tdee - 500; // 0.5kg/hafta kayıp
                    break;
                case 'gain':
                    targetCalories = tdee + 500; // 0.5kg/hafta artış
                    break;
                default:
                    targetCalories = tdee;
            }
            
            // Makro hedefleri
            const proteinTarget = weight * 2.2; // kg başına 2.2g protein
            const fatTarget = (targetCalories * 0.25) / 9; // %25 yağ
            const carbTarget = (targetCalories - (proteinTarget * 4) - (fatTarget * 9)) / 4;
            
            // Hedefleri güncelle
            document.getElementById('calorieTarget').textContent = Math.round(targetCalories);
            document.getElementById('proteinTarget').textContent = Math.round(proteinTarget);
            document.getElementById('carbTarget').textContent = Math.round(carbTarget);
            document.getElementById('fatTarget').textContent = Math.round(fatTarget);
            
            updateDashboard();
            
            alert(`Hedefler hesaplandı!\n\nBMR: ${Math.round(bmr)} kcal\nTDEE: ${Math.round(tdee)} kcal\nHedef Kalori: ${Math.round(targetCalories)}\nProtein: ${Math.round(proteinTarget)}g\nKarbonhidrat: ${Math.round(carbTarget)}g\nYağ: ${Math.round(fatTarget)}g`);
        }
        
        function editCalorieTarget() {
            const newTarget = prompt('Yeni kalori hedefi girin:');
            if (newTarget && !isNaN(newTarget)) {
                document.getElementById('calorieTarget').textContent = newTarget;
                updateDashboard();
            }
        }
        
        // VERİ YÖNETİMİ
        function exportData() {
            const data = {
                foodHistory: JSON.parse(localStorage.getItem('foodHistory') || '[]'),
                favorites: JSON.parse(localStorage.getItem('favorites') || '[]'),
                waterCount: localStorage.getItem('waterCount') || '0',
                theme: localStorage.getItem('theme') || 'light'
            };
            
            const dataStr = JSON.stringify(data, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            
            const link = document.createElement('a');
            link.href = url;
            link.download = 'kalorimax-data.json';
            link.click();
            
            URL.revokeObjectURL(url);
        }
        
        function clearAllData() {
            if (confirm('Tüm veriler silinecek. Emin misiniz?')) {
                localStorage.clear();
                location.reload();
            }
        }
        
        // Enter tuşu ile arama
        document.getElementById('foodSearch').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchFood();
            }
        });
    </script>
</body>
</html> 